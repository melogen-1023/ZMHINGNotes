## 类加载器



### 线程上下文类加载器

Thread.currentThread().getContextClassLoader()

获取当前线程的上下文类加载器

线程上下文类加载器**并不是一个全新的独立的类加载器，而是指当前环境下所使用的类加载器**，

默认都是系统类加载器



#### 为什么要有线程上下文类加载器

因为有一些用户级的类不能加载到BootStrap加载器中（因为加载到BootStrap加载器中的类，不能被其他加载器所获取调用），这时候就需要调用上下文类加载器方法，获取当前环境下的类加载器，以便加载到应该加载到的类加载器里面。



**例如 JDBC**

JDBC是基于**SPI**服务来调用厂家的驱动，SPI会用到ServiceLoader这个基类（在BootStrap类加载器加载），**BootStrap类加载器只加载包名为java,javax,sun等开头的类**，所以在ServiceLoader加载驱动类时，不能使用BootStrap加载器，只能调用线程上下文类加载器获取类加载器，以实现类的正确安全加载。



#### 双亲委派加载机制

越低级的类加载器会请求父级类加载器进行代理加载（只是帮忙加载，最后加载的类还是会返回给调用的类加载器并且装入进去），这个请求是递归请求，一直到最高级，也就是BootStrap类加载器进行代理加载