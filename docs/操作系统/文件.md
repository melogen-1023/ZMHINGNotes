## 文件

### 文件的逻辑结构（文件内部的结构）

#### 链式存储

不可以随机存取

#### 顺序存储

##### 可变长记录

不可以随机存取

##### 定长记录

可以随机存取

#### 顺序文件

物理上顺序存储的顺序文件



#### 索引文件



#### 索引顺序文件

与索引文件不同是索引文件的每一个索引项对应文件每一个的记录，而索引顺序文件即对文件记录分组，每组对应一个索引项，以减少索引表大小

#### 多级索引顺序文件

如果一级索引表过大，那么查询次数也会过多，所以，

再对索引表进行分组，每组对应二级索引表的一个索引项，以再次减少索引查询次数





### 文件目录（文件之间的结构）

#### 文件控制块（FCB)



#### 目录结构

##### 单级目录结构

##### 两级目录结构

主文件目录和用户文件目录

##### 多级目录结构（树形目录结构）



##### 无环图目录结构

用于多用户操作系统共享文件，各个用户目录至一个共享文件可有一个有向边



##### 索引结点

用于提高检索效率

把目录项的除了文件名其他的信息存入索引结点，目录项并增加一条信息：指向索引结点的指针，用于寻找索引结点



### 文件共享

#### 硬链接

索引结点有链接计数count，表示当前共享的用户的数量

#### 软链接



### 文件保护



 

### 文件的物理结构（分配方式）

> 探讨如何将文件的逻辑地址转换为物理地址
>
> 即文件之间的逻辑结构与物理结构需要有一个映射关系

#### 连续分配，隐式链式分配，显式链式分配





#### 单级索引分配

##### FCB（目录项）结构

| 文件名 | 索引块 | ...  |
| ------ | ------ | ---- |
|        |        |      |



#### 链接方案

用于解决一个硬盘块不能存放一个文件的所有索引项问题

##### 具体解决方案

在每个存放索引表的磁盘块里存放一个**指向**下一个存放该文件的索引表的磁盘块的**指针**



**不支持随机访问**





#### 多级索引分配

为了能更快速的查找文件逻辑块对应的磁盘块，提出了多级索引方案，该方案类似内存的多级页面

##### 逻辑块号至磁盘块号的转换具体做法

索引级数：二级

编号起点：0

需要访问的逻辑块号：M

设 M/256 = A， M%256 = B

A为一级索引表的索引项号，用于查找二级索引表对应的磁盘块

B为对应二级索引表里的索引项号，用于查找数据块对应的磁盘块







#### 混合索引分配

单级索引与多级索引的混合