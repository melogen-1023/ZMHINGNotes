## 设备管理

操作系统对主机外部的设备管理



### IO设备



#### IO控制器

用于实现CPU对设备的控制

##### 寄存器编制方式

内存映射I/O

寄存器独立编址



#### IO控制方式

##### 程序直接控制方式

##### 中断驱动方式

每次读/写一个字，需要CPU干预（如果要读入大量字，则需要大量中断，开销大）



##### DMA (直接存储器存取)

适用于块设备

数据传送单位是**块**

不需要CPU频繁干预，只需要在读/写的开始和结束进行CPU干预

无法读取连续的块或存入连续的块



##### DR（数据寄存器），MAR（内存地址寄存器），DC（数据计数器），CR（命令/状态寄存器）





##### 通道控制方式

通道是一种硬件，有着识别一系列指令的功能

可以离散的读/写一组数据块



#### IO软件

![1574927979531](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574927979531.png)



#### IO系统

对设备独立性，设备驱动，中断处理功能实现的系统，IO系统属于操作系统内核系统



##### SPOOLING(假脱机技术)

输入井，输出井

输入缓冲区，输出缓冲区

输入进程，输出进程



#### 缓冲区

一般使用内存作为缓冲区

##### 单缓冲

**掌握计算处理一个数据块的平均时间**

使用“**相同状态**”方法

##### 双缓冲

**掌握计算处理一个数据块的平均时间**



**单/双缓冲在通信时的作用**



##### 循环缓冲区



##### 缓冲区

空缓冲队列，输入队列，输出队列





#### 设备分配管理

##### 设备分配算法

与CPU调度算法类似



##### 设备分配的安全性

1. 安全分配方式

   

2. 不安全分配方式

   ​	会发生死锁

##### 设备分配的数据结构

1. 设备控制表（DCT）
2. 控制器控制表（COCT）
3. 通道控制表（CHCT）
4. 系统设备表（SDT）



**逻辑设备表**

用于将用户提供的逻辑设备名映射到物理设备

