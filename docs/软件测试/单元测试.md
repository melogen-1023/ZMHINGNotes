## 单元测试的定义和主要任务

> *单元测试：对软件基本组成单元进行的测试，而且软件单元是在与程序的其他部分相隔离的情况下进行独立的测试*

1. 检验各单元模块是否被正确地编码，即验证代码和软件系统设计的一致性
2. 不仅是测试代码的功能性，还需确保代码在结构上可靠且健壮，能够在各种条件下（包括异常条件，如异常操作和异常数据）给予正确的响应

## 驱动和桩

> 驱动程序（驱动模块）：用以模拟被测模块的上级模块，能够调用被测模块。在测试过程中，驱动模块接收测试数据，调用被测模块并把相关的数据传送给被测模块
>
> 桩程序（桩模块）：用以模拟被测模块工作过程中所调用的下层模块。桩模块由被测模块调用，它们一般只进行很少的数据处理，例如打印入口和返回，以便于检验被测模块与其下级模块的接口

![ååæµè¯æ¨¡åå¾](https://i.loli.net/2018/06/25/5b30d046e3156.jpeg)

### 单元测试模型图

### 代码评审中常见缺陷模式的识别

1. 空指针保护
2. 格式化数字错误
3. 字符串或数组越界错误
4. 资源不合理使用
5. 不当使用 synchronized 导致系统性能下降

### JUNIT

### 集成测试

#### 集成测试的模式及各自优缺点

> 非渐增式测试模式：先分别测试每个模块，再把所有模块按设计要求放在一起结合成所要的程序，如大棒模式。
>
> 在非增量式集成中容易出现混乱，因为测试时可能发现一大堆错误，为每个错误定位和纠正非常困难，并且在改正一个错误的同时又可能引入新的错误，新旧错误混杂，更难断定出错的原因和位置。

> 渐增式测试模式：把下一个要测试的模块同已经测试好的模块结合起来进行测试，测试是在模块一个一个的扩展下进行，其测试的范围逐步增大。
>
> 增量式集成模式，程序一段一段地扩展，每次测试的接口非常有限，错误易于定位和纠正，界面的测试也可做到完全彻底

### 混合策略及三明治集成方法

> *在具体测试中，可采用混合策略，即结合上述的两种方法——自顶向下法和自底向上法来逐步实施集成测试。 （1）改进的自顶向下法：基本使用“自顶向下”法，但在测试早期，使用“自底向上”法测试少数的关键模块。 （2）混合法：对软件结构中较上层，使用的是“自顶向下”法；对软件结构中较下层，使用的是“自底向上”法，两者相结合，如图5-15所示。*

![æ··åç­ç¥éæç¤ºæå¾](https://i.loli.net/2018/06/25/5b30d496e511c.jpeg)

> *这种混合策略也有一些不同的组合方式，如三明治集成方法，基本思想是一致的，自两头向中间集成，只是具体实现有些差异，如图5-16所示。*

![ä¸ææ²»éææ¹æ³ç¤ºæå¾](https://i.loli.net/2018/06/25/5b30d5dc92079.jpeg)

> *采用三明治方法的优点是：它将自顶向下和自底向上的集成方法有机地结合起来，不要写桩程序，因为在测试初自底向上集成已经验证了底层模块的正确性。采用这种方法的要缺点是：在真正集成之前每一个独立的模块没有完全测试过。*

